var WPGlobusYoastSeo;jQuery(document).ready(function(a){"use strict";if("undefined"!=typeof wpseoReplaceVarsL10n&&"undefined"!=typeof WPGlobusCoreData&&"undefined"!=typeof WPGlobusVendor){var b;if("edit-tags.php"==WPGlobusVendor.pagenow||"term.php"==WPGlobusVendor.pagenow){b=WPGlobusYoastSeo={editorIDs:["description"],editor:{},submitId:"#submit",preventChangeEditor:!1,observer:null,init:function(){b.attachListeners(),_.delay(b.start,1500)},submit:function(c){"mouseenter"===c.type?a.each(b.editor,function(c,d){!b.editor[c].contentEditor||b.editor[c].contentEditor.isHidden()?a("#"+c).val(b.editor[c].content):tinymce.get(c).setContent(b.editor[c].content)}):"mouseleave"===c.type?b.preventChangeEditor||(a.each(b.editor,function(c,d){!b.editor[c].contentEditor||b.editor[c].contentEditor.isHidden()?a("#"+c).val(WPGlobusCore.TextFilter(d.content,b.getCurrentTab(),"RETURN_EMPTY")):tinymce.get(c).setContent(WPGlobusCore.TextFilter(d.content,b.getCurrentTab(),"RETURN_EMPTY"))}),b.preventChangeEditor=!1):"click"===c.type&&(b.preventChangeEditor=!0,"tinymce"!=getUserSetting("editor")&&setUserSetting("editor","tinymce"))},attachListeners:function(){a(".wrap").on("tabsactivate",function(c,d){a.each(b.editor,function(c,e){!b.editor[c].contentEditor||b.editor[c].contentEditor.isHidden()?a("#"+c).val(WPGlobusCore.TextFilter(e.content,d.newTab[0].dataset.language,"RETURN_EMPTY")):tinymce.get(c).setContent(WPGlobusCore.TextFilter(e.content,d.newTab[0].dataset.language,"RETURN_EMPTY"))})}),a(document).on("mouseenter",b.submitId,b.submit).on("mouseleave",b.submitId,b.submit).on("click",b.submitId,b.submit),a(document).on("tinymce-editor-init",function(c,d){if(_.indexOf(b.editorIDs,d.id)!=-1){var e=a("#"+d.id);b.editor[d.id]={},b.editor[d.id].contentEditor=d,b.editor[d.id].content=e.val(),d.setContent(WPGlobusCore.TextFilter(b.editor[d.id].content,WPGlobusCoreData.default_language,"RETURN_EMPTY")),a("#"+d.getContainer().id).find("iframe").addClass("wpglobus-translatable"),e.removeClass("hidden"),d.on("nodechange keyup",_.debounce(b.update,500)),e.on("input keyup",_.debounce(b.update,500))}})},update:function(c){var d,e;"undefined"!=typeof c.target&&(d=c.target.id,"tinymce"==d&&(d=c.target.dataset.id),"undefined"!=typeof b.editor[d].contentEditor&&(e=!b.editor[d].contentEditor||b.editor[d].contentEditor.isHidden()?a("#"+d).val():b.editor[d].contentEditor.getContent({format:"raw"}),b.editor[d].content=WPGlobusCore.getString(b.editor[d].content,e,b.getCurrentTab())))},getCurrentTab:function(){return a(".wpglobus-taxonomy-tabs-list .ui-tabs-active").data("language")},start:function(){a(".wpglobus-element_description").css({display:"none"})}},WPGlobusYoastSeo.init();var c=function(){a(".wrap").on("tabsactivate",function(b,c){c.newTab[0].dataset.language==WPGlobusCoreData.default_language?a("#poststuff .inside").css({display:"block"}):a("#poststuff .inside").css({display:"none"})}),a.each(["category_description","sitedesc","sitename","tag_description","term_description","term_title"],function(a,b){wpseoReplaceVarsL10n.replace_vars[b]=WPGlobusCore.TextFilter(wpseoReplaceVarsL10n.replace_vars[b],WPGlobusCoreData.default_language)}),WPGlobusYoastSeo.observer=new MutationObserver(function(b){b.forEach(function(b){if("placeholder"==b.attributeName){WPGlobusYoastSeo.observer.disconnect();var c=a("#wpseo_focuskw");""==c.val()&&c.attr("placeholder",WPGlobusCore.TextFilter(c.attr("placeholder"),WPGlobusCoreData.default_language)),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})}})}),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})};window.WPGlobusYoastSeoPlugin=new c}else{b=WPGlobusYoastSeo={wpseoTabSelector:"#wpglobus-wpseo-tabs",url:"",attrs:a("#wpglobus-wpseo-attr"),iB:a("#wpseo-meta-section-content"),t:a("#wpseo-meta-section-content"),ids:"",names:"",editSnippetButtonClass:"wpglobus-snippet-editor__edit-button",editSnippetFormClass:"wpglobus-snippet-editor__form",editSnippetSubmitClass:"wpglobus-snippet-editor__submit",editSnippetHeadingClass:"wpglobus-snippet-editor__heading-editor",yoastTitleProgress:"wpglobus-yoast-title-progress",yoastMetadescProgress:"wpglobus-yoast-metadesc-progress",init:function(){b.start()},initAddKeywordPopup:function(){1===a("#wpseo-add-keyword-popup").length&&a(".wpseo-add-keyword").on("click",b.addKeywordPopup)},addKeywordPopup:function(){var b=a("#wpseo-add-keyword-popup").find("h3").html();tb_show(b,"#TB_inline?width=650&height=350&inlineId=wpseo-add-keyword-popup","group"),jQuery("#TB_window").css("height",235),jQuery("#TB_window").css("width",680)},qtip:function(){a(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}})},removeClasses:function(a,b){_.each(b,function(b){a.removeClass(b)})},updateProgressBar:function(c,d){if("undefined"!=typeof c&&("undefined"!=typeof d||("undefined"!==c.data("language")&&(d=c.data("language")),"undefined"!=typeof d))){var e,f,g=["snippet-editor__progress--bad","snippet-editor__progress--ok","snippet-editor__progress--good"],h=0,i="",j=0,k=!1;e=c.val(),h=e.length,c.hasClass("wpglobus-snippet-editor-title")?(f=a("progress."+b.yoastTitleProgress+"_"+d),j=f.attr("max"),i=g[2],0==h?i=g[1]:h>j?(i=g[1],k=!0):h>0&&h<35&&(i=g[1])):c.hasClass("wpglobus-snippet-editor-meta-description")&&(f=a("progress."+b.yoastMetadescProgress+"_"+d),j=f.attr("max"),i=g[2],0==h?i=g[1]:h>j?(i=g[1],k=!0):h>0&&h<121&&(i=g[1])),b.removeClasses(f,g),f.attr("value",h).addClass(i),k?c.css("color","#f00"):c.css("color","#000")}},start:function(){a(b.wpseoTabSelector).tabs(),b.ids=b.attrs.data("ids"),b.names=b.attrs.data("names"),b.ids=b.ids+","+b.attrs.data("qtip"),b.ids=b.ids.split(","),b.names=b.names.split(","),a("#wpglobus-wpseo-tabs").insertBefore(b.iB),a(".wpseo-metabox-tabs").css({height:"26px"}),a(".wpglobus-wpseo-general").each(function(c,d){var e=a(d),f=e.data("language"),g="wpseo-meta-section-content_"+f;e.html('<div id="'+g+'" class="wpseo-meta-section wpglobus-wpseo-meta-section" style="width:100%" data-language="'+f+'">'+b.t.html()+"</div>"),a("#"+g+" .wpseo-metabox-tabs").attr("id","wpseo-metabox-tabs_"+f),a("#"+g+" .wpseotab").attr("id","wpseo_content_"+f),a("#"+g).css({display:"block"}),a("#wpseo_meta").css({overflow:"hidden"}),a("#"+g+" .snippet_container").addClass("wpglobus-snippet_container"),f!==WPGlobusCoreData.default_language&&a("#"+g+" .wpseo-add-keyword").addClass("hidden"),a.each(b.names,function(b,c){a("#"+c).attr("name",c+"_"+f)}),a.each(b.ids,function(c,d){var e=a("#"+d);"wpseosnippet"==d&&e.addClass("wpglobus-wpseosnippet"),"snippet_title"==d&&e.addClass("wpglobus-snippet_title"),"snippet_meta"==d&&e.addClass("wpglobus-snippet_meta"),"snippet_cite"==d&&e.addClass("wpglobus-snippet_cite"),"snippet_citeBase"==d&&e.addClass("wpglobus-snippet_citeBase"),"yoast_wpseo_focuskw_text_input"==d&&e.addClass("wpglobus-yoast_wpseo_focuskw_text_input"),"wpseo-pageanalysis"==d&&e.addClass("wpglobus-wpseo-pageanalysis"),"snippet_preview"==d&&e.addClass("wpglobus-snippet_preview"),"snippet-editor-title"==d&&(e.addClass("wpglobus-snippet-editor-title"),e.parent("label").attr("for",e.parent("label").attr("for")+"_"+f),e.val(a("#wpseo-tab-"+f).data("wpseotitle")),e.parent("label").find("progress").addClass(b.yoastTitleProgress).addClass(b.yoastTitleProgress+"_"+f),_.debounce(b.updateProgressBar(e,f),500)),"snippet-editor-slug"==d&&(e.addClass("wpglobus-snippet-editor-slug"),e.parent("label").attr("for",e.parent("label").attr("for")+"_"+f),WPGlobusCoreData.default_language!=f&&e.attr("disabled","disabled")),"snippet-editor-meta-description"==d&&(e.addClass("wpglobus-snippet-editor-meta-description"),e.parent("label").attr("for",e.parent("label").attr("for")+"_"+f),e.val(a("#wpseo-tab-"+f).data("metadesc")),e.parent("label").find("progress").addClass(b.yoastMetadescProgress).addClass(b.yoastMetadescProgress+"_"+f),_.debounce(b.updateProgressBar(e,f),500)),e.attr("id",d+"_"+f),a("#"+d+"_"+f).attr("data-language",f)});var h=WPGlobusCore.TextFilter(a("#yoast_wpseo_focuskw_text_input").val(),f,"RETURN_EMPTY");a("#yoast_wpseo_focuskw_text_input_"+f).val(h),a("#yoast_wpseo_focuskw_"+f).val(h),f!==WPGlobusCoreData.default_language&&(a("#"+g+" #yoast_wpseo_focuskw_text_input_"+f).addClass("hidden").after('<div class="wpglobus-suggest" style="font-weight:bold;">'+WPGlobusVendor.i18n.yoastseo_plus_access+"</div>"),a("#"+g+" #wpseo-pageanalysis_"+f).addClass("hidden"))}),a(".wpglobus-wpseosnippet").each(function(c,d){var e=a(d),f=e.data("language");e.find("button.snippet-editor__button.snippet-editor__edit-button").addClass(b.editSnippetButtonClass).addClass(b.editSnippetButtonClass+"_"+f).attr("data-language",f),e.find(".snippet-editor__form").addClass(b.editSnippetFormClass).addClass(b.editSnippetFormClass+"_"+f),e.find(".snippet-editor__heading-editor").addClass(b.editSnippetHeadingClass).addClass(b.editSnippetHeadingClass+"_"+f),e.find(".snippet-editor__submit").addClass(b.editSnippetSubmitClass).addClass(b.editSnippetSubmitClass+"_"+f).attr("data-language",f)}),b.iB.addClass("hidden"),b.iB.css({height:0,overflow:"hidden"});var c=WPGlobusCore.TextFilter(a("#yoast_wpseo_focuskw_text_input").val(),WPGlobusCoreData.default_language,"RETURN_EMPTY");a("#yoast_wpseo_focuskw_text_input").val(c),a("#yoast_wpseo_focuskw").val(c),a(".wpseo-metabox-sidebar .wpseo-meta-section-link").on("click",function(b){"#wpseo-meta-section-content"==a(this).attr("href")?a("#wpglobus-wpseo-tabs").css({display:"block"}):a("#wpglobus-wpseo-tabs").css({display:"none"})}),a("body").on("click","."+b.editSnippetButtonClass,function(c){var d=a(this),e=d.data("language"),f=a("."+b.editSnippetFormClass+"_"+e),g=a("."+b.editSnippetSubmitClass+"_"+e),h=a("."+b.editSnippetHeadingClass+"_"+e);f.hasClass("snippet-editor--hidden")?(f.removeClass("snippet-editor--hidden"),h.removeClass("snippet-editor--hidden"),g.removeClass("snippet-editor--hidden")):(f.addClass("snippet-editor--hidden"),h.addClass("snippet-editor--hidden")),d.addClass("snippet-editor--hidden")}),a("body").on("click","."+b.editSnippetSubmitClass,function(c){var d=a(this),e=d.data("language"),f=a("."+b.editSnippetButtonClass+"_"+e),g=a("."+b.editSnippetFormClass+"_"+e),h=a("."+b.editSnippetSubmitClass+"_"+e),i=a("."+b.editSnippetHeadingClass+"_"+e);f.removeClass("snippet-editor--hidden"),g.addClass("snippet-editor--hidden"),h.addClass("snippet-editor--hidden"),i.addClass("snippet-editor--hidden")}),a(document).on("keyup","input.wpglobus-snippet-editor-title",function(c){var d=a(this),e=d.data("language"),f=WPGlobusCore.getString(a('input[name="yoast_wpseo_title"]').val(),d.val(),e);a("#snippet_title_"+e).text(d.val()),YoastSEO.app.rawData.pageTitle=f,a('input[name="yoast_wpseo_title"]').val(f),a("#snippet_title").text(f),_.debounce(b.updateProgressBar(d,e),500)}),a(document).on("keyup","input.wpglobus-snippet-editor-slug",function(b){var c=a(this),d=c.data("language");a("#snippet_cite_"+d).text(c.val()+"/"),a("#editable-post-name").text(c.val()),a("#editable-post-name-full").text(c.val())}),a(document).on("change","input.wpglobus-snippet-editor-slug",function(b){var c=a(this);a.post(ajaxurl,{action:"sample-permalink",post_id:a("#post_ID").val()||0,new_slug:c.val(),new_title:a("#title").val(),samplepermalinknonce:a("#samplepermalinknonce").val()})}),a(document).on("keyup","textarea.wpglobus-snippet-editor-meta-description",function(c){var d=a(this),e=d.data("language");a("#snippet_meta_"+e).text(d.val());var f=WPGlobusCore.getString(a("#yoast_wpseo_metadesc").val(),d.val(),d.data("language"));a("#yoast_wpseo_metadesc").val(f),a("#snippet_meta").text(f),_.debounce(b.updateProgressBar(d,e),500)}),a("body").on("click",".wpglobus-post-body-tabs-list li",function(b){var c=a(this);if(c.hasClass("wpglobus-post-tab")){a("#wpglobus-wpseo-tabs").tabs("option","active",c.data("order"));var d=a("#yoast_wpseo_focuskw_text_input_"+a(this).data("language")).val();YoastSEO.app.rawData.keyword=d,a("#yoast_wpseo_focuskw_text_input").val(d),a('input[name="yoast_wpseo_focuskw"]').val(d),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),b.qtip(),b.initAddKeywordPopup()}};var d,c=function(){this.replaceVars=wpseoReplaceVarsL10n.replace_vars,this.language=WPGlobusCoreData.default_language,this.tab=WPGlobusCoreData.default_language,this.wpseoTab=WPGlobusCoreData.default_language,this.title_template=wpseoPostScraperL10n.title_template,this.focuskw=a("#yoast_wpseo_focuskw_text_input"),this.focuskw_hidden=a('input[name="yoast_wpseo_focuskw"]'),this.focuskwKeep=!1,this.post_slug="#editable-post-name-full",YoastSEO.app.registerPlugin("wpglobusYoastSeoPlugin",{status:"ready"}),YoastSEO.app.registerModification("content",this.contentModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("title",this.titleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_title",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_meta",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_page_title",this.pageTitleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_meta_desc",this.metaDescModification,"wpglobusYoastSeoPlugin",0),a(document).on("blur",".wpglobus-snippet_title",function(b){var c=a(this),d=WPGlobusCore.getString(a("#yoast_wpseo_title").val(),c.text(),c.data("language"));YoastSEO.app.rawData.pageTitle=d,a('input[name="yoast_wpseo_title"]').val(d),a("#snippet_title").text(d)}),a(document).on("blur",".wpglobus-snippet_meta",function(b){var c=a(this),d=WPGlobusCore.getString(a("#yoast_wpseo_metadesc").val(),c.text(),c.data("language"));a("#yoast_wpseo_metadesc").val(d),a("#snippet_meta").text(d)}),a(document).on("keyup",".wpglobus-yoast_wpseo_focuskw_text_input",function(b){var c=a(this),e=c.val();d.focuskw.val(e),d.focuskw_hidden.val(e),d.updateWpseoKeyword(e,c.data("language")),YoastSEO.app.analyzeTimer(YoastSEO.app)}),a("#publish,#save-post").on("mouseenter",function(b){var c,e="";a(".wpglobus-yoast_wpseo_focuskw_text_input").each(function(b,d){c=a(this),e=WPGlobusCore.getString(e,c.val(),c.data("language"))}),d.focuskw.val(e),d.focuskw_hidden.val(e)}).on("mouseleave",function(b){if(!d.focuskwKeep){d.wpseoTab=a(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language");a(this);d.focuskw.val(a("#yoast_wpseo_focuskw_text_input_"+d.wpseoTab).val()),d.focuskw_hidden.val(a("#yoast_wpseo_focuskw_text_input_"+d.wpseoTab).val())}}).on("click",function(a){d.focuskwKeep=!0}),a(WPGlobusYoastSeo.wpseoTabSelector).on("tabsactivate",function(b,c){if(c.newPanel.attr("data-language")===WPGlobusCoreData.default_language){WPGlobusYoastSeo.url=a(d.post_slug).text();var e=a("#yoast_wpseo_focuskw_text_input_"+WPGlobusCoreData.default_language).val();YoastSEO.app.rawData.keyword=e,d.focuskw.val(e),d.focuskw_hidden.val(e),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),d=this};c.prototype.getWPseoTab=function(){return a(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language")},c.prototype.citeModification=function(b){var c="#snippet_citeBase_"+b,d="#snippet_cite_"+b,e=a("#wpseo-tab-"+b).data("yoast-cite-base"),f=a("#wpseo-tab-"+b).data("cite-contenteditable");f===!1&&a(d).attr("contenteditable","false"),a(c).text(e)},c.prototype.pageTitleModification=function(b){var c,e="#snippet_title_",f="",g="";if(d.title_template==b)a.each(WPGlobusCoreData.enabled_languages,function(c,h){d.language=h,f=d.replaceVariablesPlugin(b),a(e+h).text(f),h==d.getWPseoTab()&&(g=f)});else{if(c=WPGlobusCore.getTranslations(b),d.getWPseoTab()!==WPGlobusCoreData.default_language&&c[WPGlobusCoreData.default_language]==b){var h=d.getWPseoTab();return a(e+h).text(b),b}a.each(WPGlobusCoreData.enabled_languages,function(b,h){d.language=h,f=""===c[h]?d.replaceVariablesPlugin(d.title_template):c[h],a(e+h).text(f),h==d.getWPseoTab()&&(g=f)})}return g},c.prototype.metaDescModification=function(b){var c="#snippet_meta_";if(d.getWPseoTab()!==WPGlobusCoreData.default_language){var e=WPGlobusCore.getTranslations(b);if(e[WPGlobusCoreData.default_language]==b){var f=d.getWPseoTab();return a(c+f).text(b),d.citeModification(f),b}}return a.each(WPGlobusCoreData.enabled_languages,function(e,f){a(c+f).text(WPGlobusCore.TextFilter(b,f,"RETURN_EMPTY")),d.citeModification(f)}),WPGlobusCore.TextFilter(b,d.getWPseoTab(),"RETURN_EMPTY")},c.prototype.snippetModification=function(a){return WPGlobusCore.TextFilter(a,d.getWPseoTab(),"RETURN_EMPTY")},c.prototype.contentModification=function(b){return d.getWPseoTab()==WPGlobusCoreData.default_language?b:a("#content_"+d.getWPseoTab()).val()},c.prototype.titleModification=function(b){return setTimeout(d.updatePageAnalysis,1e3),d.getWPseoTab()==WPGlobusCoreData.default_language?b:a("#title_"+d.getWPseoTab()).val()},c.prototype.defaultReplace=function(a){var b=YoastSEO.app.rawData.keyword;return a.replace(/%%sitedesc%%/g,this.replaceVars.sitedesc).replace(/%%sitename%%/g,this.replaceVars.sitename).replace(/%%term_title%%/g,this.replaceVars.term_title).replace(/%%term_description%%/g,this.replaceVars.term_description).replace(/%%category_description%%/g,this.replaceVars.category_description).replace(/%%tag_description%%/g,this.replaceVars.tag_description).replace(/%%searchphrase%%/g,this.replaceVars.searchphrase).replace(/%%date%%/g,this.replaceVars.date).replace(/%%id%%/g,this.replaceVars.id).replace(/%%page%%/g,this.replaceVars.page).replace(/%%currenttime%%/g,this.replaceVars.currenttime).replace(/%%currentdate%%/g,this.replaceVars.currentdate).replace(/%%currentday%%/g,this.replaceVars.currentday).replace(/%%currentmonth%%/g,this.replaceVars.currentmonth).replace(/%%currentyear%%/g,this.replaceVars.currentyear).replace(/%%focuskw%%/g,b)},c.prototype.replaceVariablesPlugin=function(a){return"undefined"!=typeof a&&(a=this.titleReplace(a),a=this.defaultReplace(a),a=this.replaceSeparators(a)),a},c.prototype.replaceSeparators=function(a){return a.replace(/%%sep%%(\s+%%sep%%)*/g,this.replaceVars.sep)},c.prototype.titleReplace=function(b){var c="";return c=this.language==WPGlobusCoreData.default_language?a("#title").val():a("#title_"+this.language).val(),"undefined"==typeof c&&(c=YoastSEO.app.rawData.pageTitle),b=b.replace(/%%title%%/g,c)},c.prototype.doubleSepReplace=function(a){var b=YoastSEO.app.stringHelper.addEscapeChars(this.replaceVars.sep),c=new RegExp(b+" "+b,"g");return a=a.replace(c,this.replaceVars.sep)},c.prototype.updateWpseoKeyword=function(b,c){c!=WPGlobusCoreData.default_language&&(1==a("#wpseo-meta-section-content_"+c+" .wpseo_keyword").length&&a("#wpseo-meta-section-content_"+c+" .wpseo_keyword").removeClass("wpseo_keyword").addClass("wpglobus-wpseo_keyword_"+c),a(".wpglobus-wpseo_keyword_"+c).text(b))},c.prototype.updatePageAnalysis=function(){a("#wpseo-pageanalysis_"+d.getWPseoTab()).html(a("#wpseo-pageanalysis").html())},c.prototype.countMatches=function(a,b){return null!==a.match(b)?a.match.length:0},window.WPGlobusYoastSeoPlugin=new c,YoastSEO.Analyzer.prototype.urlKeyword=function(){var a=[{test:"urlKeyword",result:0}];return"undefined"!=typeof WPGlobusYoastSeo&&""!==WPGlobusYoastSeo.url&&(this.config.url=WPGlobusYoastSeo.url),"undefined"!=typeof this.config.url&&(a[0].result=c.prototype.countMatches(this.config.url,this.keywordRegexInverse)),a}}}});